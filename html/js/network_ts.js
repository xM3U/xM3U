class Server{constructor(o){this.cmd=o}request(o){if(SERVER_CONNECTION!=!0){switch(SERVER_CONNECTION=!0,this.cmd!="updateLog"&&(showElement("loading",!0),UNDO=new Object),window.location.protocol){case"http:":this.protocol="ws://";break;case"https:":this.protocol="wss://";break}var t=this.protocol+window.location.hostname+":"+window.location.port+"/data/?Token="+getCookie("Token");o.cmd=this.cmd;var n=new WebSocket(t);n.onopen=function(){WS_AVAILABLE=!0,this.send(JSON.stringify(o))},n.onerror=function(a){SERVER_CONNECTION=!1,WS_AVAILABLE==!1&&alert("No websocket connection to xTeVe could be established. Check your network configuration.")},n.onmessage=function(a){SERVER_CONNECTION=!1,showElement("loading",!1);var e=JSON.parse(a.data);if(e.hasOwnProperty("token")&&(document.cookie="Token="+e.token),e.status==!1){alert(e.err),e.hasOwnProperty("reload")&&location.reload();return}if(e.hasOwnProperty("logoURL")){var s=document.getElementById("channel-icon");s.value=e.logoURL,s.className="changed";return}switch(o.cmd){case"updateLog":SERVER.log=e.log,document.getElementById("content_log")&&showLogs(!1);return;default:SERVER=new Object,SERVER=e;break}if(e.hasOwnProperty("openMenu")){var l=document.getElementById(e.openMenu);l.click(),showElement("popup",!1)}if(e.hasOwnProperty("openLink")&&(window.location=e.openLink),e.hasOwnProperty("alert")&&alert(e.alert),e.hasOwnProperty("reload")&&location.reload(),e.hasOwnProperty("wizard")){createLayout(),configurationWizard[e.wizard].createWizard();return}createLayout()}}}}function getCookie(r){var o="; "+document.cookie,t=o.split("; "+r+"=");if(t.length==2)return t.pop().split(";").shift()}
